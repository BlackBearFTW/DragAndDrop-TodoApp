(this["webpackJsonpdnd-todoapp"]=this["webpackJsonpdnd-todoapp"]||[]).push([[0],{26:function(n,e,t){},33:function(n,e,t){"use strict";t.r(e);var r,i,a,c,o,d,u,l,s,p,b,f,j,x,h,O,g,v=t(0),y=t.n(v),m=t(8),k=t.n(m),w=t(4),S=(t(26),t(5)),C=t(6),F=Symbol(),I=function(n){return new Proxy(n,{construct:function(n,e,t){return n.prototype!==t.prototype?Reflect.construct(n,e,t):(n[F]||(n[F]=Reflect.construct(n,e,t)),n[F])}})},E=function(){function n(){Object(S.a)(this,n)}return Object(C.a)(n,null,[{key:"deepCopy",value:function(n){return JSON.parse(JSON.stringify(n))}}]),n}(),N=t(34),J=I(r=function(){function n(e){Object(S.a)(this,n),this.stateFunction=void 0,this.stateFunction=e}return Object(C.a)(n,[{key:"addCard",value:function(n){this.stateFunction((function(e){var t=E.deepCopy(e),r={id:Object(N.a)(),list_id:n,value:""};return t.push(r),t}))}},{key:"updateCard",value:function(n){this.stateFunction((function(e){var t=E.deepCopy(e),r=t.findIndex((function(e){return e.id===n.id}));return t[r]=n,t}))}},{key:"deleteCard",value:function(n){this.stateFunction((function(e){return E.deepCopy(e).filter((function(e){return e.id!==n.id}))}))}},{key:"deleteCardByList",value:function(n){this.stateFunction((function(e){return E.deepCopy(e).filter((function(e){return e.list_id!==n}))}))}}]),n}())||r,L=I(i=function(){function n(e){Object(S.a)(this,n),this.stateFunction=void 0,this.stateFunction=e}return Object(C.a)(n,[{key:"changeName",value:function(n){this.stateFunction((function(e){var t=E.deepCopy(e);return t.name=n,t}))}},{key:"changeColor",value:function(n){this.stateFunction((function(e){var t=E.deepCopy(e);return t.bg_color=n,t}))}}]),n}())||i,_=t(20),B=I(a=function(){function n(e){Object(S.a)(this,n),this.stateFunction=void 0,this.stateFunction=e}return Object(C.a)(n,[{key:"addList",value:function(){this.stateFunction((function(n){return[].concat(Object(_.a)(E.deepCopy(n)),[{id:Object(N.a)(),name:"List name"}])}))}},{key:"updateList",value:function(n){this.stateFunction((function(e){var t=E.deepCopy(e),r=t.findIndex((function(e){return e.id===n.id}));return t[r]=n,t}))}},{key:"deleteList",value:function(n){this.stateFunction((function(e){return E.deepCopy(e).filter((function(e){return e.id!==n.id}))}))}}]),n}())||a,D=t(2),R=t(3),P=t(1),A=R.a.div(c||(c=Object(D.a)(["\n  display: flex;\n  flex-flow: column;\n  height: 100%;\n"]))),H=R.a.div(o||(o=Object(D.a)(['\n  display: inline-flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  & > * {\n    margin: 0;\n    padding: 15px;\n    cursor: pointer;\n  }\n  \n  & > input[type="color"] {\n    border-radius: 100%;\n    height: 30px;\n    width: 30px;\n    border: none;\n    padding: 2px;\n    margin: 15px;\n  \n    &::-webkit-color-swatch-wrapper {\n      padding: 0px;\n      border-radius: 100%;\n    }\n\n    &::-webkit-color-swatch {\n      padding: 0px;\n      border-radius: 100%;\n    }\n  }\n  \n']))),K=R.a.input(d||(d=Object(D.a)(["\n  margin: 0;\n  padding: 15px;\n  color: white;\n  border: none;\n  background: transparent;\n  font-weight: bold;\n\n  &:focus {\n    outline: 0;\n  }\n"]))),V=R.a.div(u||(u=Object(D.a)(["\n  flex: 1;\n  display: inline-flex;\n  padding: 0 15px 15px;\n  overflow-x: auto;\n"]))),z=function(n){var e,t=n.data,r=n.boardService,i=n.children,a=Object(v.useState)(!1),c=Object(w.a)(a,2),o=c[0],d=c[1],u=Object(v.useRef)(null),l=function(){""!==u.current.value.trim()&&(r.changeName(u.current.value),d(!1))};return Object(P.jsxs)(A,{style:{background:t.bg_color,color:(e=t.bg_color,parseInt(e.replace("#",""),16)>8388607.5?"#000":"#fff")},children:[Object(P.jsxs)(H,{children:[o?Object(P.jsx)(K,{type:"text",ref:u,defaultValue:t.name,onBlur:l,onKeyDown:function(n){"Enter"!==n.key&&"Escape"!==n.key||l()}}):Object(P.jsx)("h2",{onDoubleClick:function(){return d(!0)},children:t.name}),Object(P.jsx)("input",{type:"color",value:t.bg_color,onChange:function(n){return r.changeColor(n.target.value)}})]}),Object(P.jsx)(V,{children:i})]})},M=t(7),T=t(14),W=t(10),q=R.a.div(l||(l=Object(D.a)(["\n  min-width: 280px;\n  max-width: 280px;\n  background: #ebecf0;\n  border-radius: 3px;\n\n  /* Enables Scroll on CardWrapper */\n  position: relative;\n  height: 100%;\n\n  & ~ & {\n    margin-left: 15px;\n  }\n"]))),G=R.a.div(s||(s=Object(D.a)(["\n  position: absolute;\n  width: 100%;\n  /*   Top: 40 for header */\n  top: 40px;\n  /*   Bottom: 45 for button */\n  bottom: 45px;\n  overflow-y: auto;\n\n\n  /* width */\n\n  &::-webkit-scrollbar {\n    width: 10px;\n  }\n\n  /* Track */\n\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n\n  /* Handle */\n\n  &::-webkit-scrollbar-thumb {\n    background: #c4c4c4;\n  }\n"]))),Q=R.a.h4(p||(p=Object(D.a)(["\n  padding: 10px;\n  margin: 0;\n  cursor: pointer;\n  color: black;\n\n\n  &:hover > * div:last-of-type {\n    color: black;\n    transition: all 500ms;\n    opacity: 1;\n  }\n"]))),U=R.a.input(b||(b=Object(D.a)(["\n  margin: 0;\n  padding: 0;\n  font-weight: bold;\n  border: none;\n  background: transparent;\n\n  &:focus {\n    outline: 0;\n  }\n"]))),X=R.a.button(f||(f=Object(D.a)(["\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  border: none;\n  background: lightgray;\n  padding: 15px;\n  cursor: pointer;\n  border-radius: 0 0 3px 3px;\n"]))),Y=R.a.div(j||(j=Object(D.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  & > *:last-of-type {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 5px 0 15px;\n    color: #ebecf0;\n    opacity: 0;\n  }\n\n"]))),Z=function(n){var e=n.data,t=n.children,r=n.cardService,i=n.listService,a=Object(v.useState)(!1),c=Object(w.a)(a,2),o=c[0],d=c[1],u=Object(v.useRef)(null),l=function(){""!==u.current.value.trim()&&(e.name=u.current.value,i.updateList(e),d(!1))};return Object(P.jsxs)(q,{children:[Object(P.jsx)(Q,{onDoubleClick:function(){return d(!0)},children:o?Object(P.jsx)(U,{type:"text",ref:u,defaultValue:e.name,onBlur:l,onKeyDown:function(n){"Enter"!==n.key&&"Escape"!==n.key||l()}}):Object(P.jsxs)(Y,{children:[Object(P.jsx)("div",{children:e.name}),Object(P.jsx)("div",{onClick:function(){i.deleteList(e),r.deleteCardByList(e.id)},children:Object(P.jsx)(T.a,{})})]})}),Object(P.jsx)(W.c,{droppableId:e.id,children:function(n){return Object(P.jsxs)(G,Object(M.a)(Object(M.a)({},n.droppableProps),{},{ref:n.innerRef,children:[t,n.placeholder]}))}}),Object(P.jsx)(X,{onClick:function(){return r.addCard(e.id)},children:"Add Card +"})]})},$=R.a.div(x||(x=Object(D.a)(["\n  background: white;\n  margin: 0 5px 5px;\n  padding: 10px;\n  border-radius: 3px;\n  overflow-wrap: break-word;\n  color: black;\n\n  & ~ & {\n    margin-top: 5px;\n  }\n\n  &:hover > * div:last-of-type {\n    color: black;\n    transition: all 500ms;\n\n  }\n"]))),nn=R.a.textarea(h||(h=Object(D.a)(["\n  border: none;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  width: 100%;\n  min-height: 15px;\n  display: block;\n  overflow: hidden;\n  resize: none;\n\n  &:focus {\n    outline: 0;\n  }\n"]))),en=R.a.div(O||(O=Object(D.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  & > *:last-of-type {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 5px 0 15px;\n    color: white;\n    cursor: pointer;\n  }\n\n"]))),tn=function(n){var e=n.data,t=n.cardService,r=n.index,i=Object(v.useState)(""===e.value),a=Object(w.a)(i,2),c=a[0],o=a[1],d=Object(v.useRef)(null);Object(v.useEffect)((function(){c&&u()}),[c]);var u=function(){var n=d.current;n.style.height="auto",n.style.height=(null===n||void 0===n?void 0:n.scrollHeight)+"px"},l=function(){if(""===d.current.value.trim())return t.deleteCard(e);o(!1),e.value=d.current.value,t.updateCard(e)},s=function(n){"Enter"!==n.key&&"Escape"!==n.key||l()};return Object(P.jsx)(W.b,{draggableId:e.id,index:r,children:function(n){return Object(P.jsx)($,Object(M.a)(Object(M.a)(Object(M.a)({onDoubleClick:function(){return o(!0)}},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:c?Object(P.jsx)(nn,{autoFocus:!0,ref:d,defaultValue:e.value,onChange:u,onKeyDown:s,onBlur:l}):Object(P.jsxs)(en,{children:[Object(P.jsx)("div",{children:e.value}),Object(P.jsx)("div",{onClick:function(){return t.deleteCard(e)},children:Object(P.jsx)(T.a,{})})]})}))}})},rn=R.a.button(g||(g=Object(D.a)(["\n  width: 280px;\n  border: none;\n  background: #ebecf0;\n  border-radius: 3px;\n  flex: none;\n  align-self: flex-start;\n  padding: 15px;\n  cursor: pointer;\n  \n  * ~ & {\n    margin-left: 15px;\n  }\n"])));var an,cn,on,dn=function(n){var e=n.listService;return Object(P.jsx)(rn,{onClick:function(){return e.addList()},children:"Add List +"})};var un=function(){var n=Object(v.useState)({name:"Board name",bg_color:"#282828"}),e=Object(w.a)(n,2),t=e[0],r=e[1],i=Object(v.useState)([]),a=Object(w.a)(i,2),c=a[0],o=a[1],d=Object(v.useState)([]),u=Object(w.a)(d,2),l=u[0],s=u[1];return Object(v.useEffect)((function(){an=new L(r),cn=new B(o),on=new J(s)}),[t,l,c]),Object(v.useEffect)((function(){var n=localStorage.getItem("boardState"),e=localStorage.getItem("listsState"),t=localStorage.getItem("cardsState");n&&r(JSON.parse(n)),e&&o(JSON.parse(e)),t&&s(JSON.parse(t)),n||window.location.reload()}),[]),Object(v.useEffect)((function(){localStorage.setItem("boardState",JSON.stringify(t)),localStorage.setItem("listsState",JSON.stringify(c)),localStorage.setItem("cardsState",JSON.stringify(l))}),[t,c,l]),Object(P.jsx)("div",{className:"App",children:Object(P.jsxs)(z,{data:t,boardService:an,children:[Object(P.jsx)(W.a,{onDragEnd:function(n){var e=n.draggableId,t=n.source,r=n.destination;r&&(r.index===t.index&&r.droppableId===t.droppableId||s((function(n){var i=E.deepCopy(n),a=i.find((function(n){return n.id===e}));return a.list_id=r.droppableId,i.splice(t.index,1),i.splice(r.index,0,a),i})))},children:c.map((function(n){return Object(P.jsx)(Z,{data:n,cardService:on,listService:cn,children:l.flatMap((function(e,t){return e.list_id===n.id?Object(P.jsx)(tn,{data:e,cardService:on,index:t},e.id):""}))},n.id)}))}),Object(P.jsx)(dn,{listService:cn})]})})};k.a.render(Object(P.jsx)(y.a.StrictMode,{children:Object(P.jsx)(un,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.21360ffa.chunk.js.map