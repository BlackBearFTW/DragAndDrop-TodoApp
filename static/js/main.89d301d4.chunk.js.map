{"version":3,"sources":["decorators/Singleton.ts","utils/ObjectUtil.ts","services/CardService.ts","services/BoardService.ts","services/ListService.ts","components/Board.tsx","components/List.tsx","components/Card.tsx","components/AddList.tsx","App.tsx","index.js"],"names":["SINGLETON_KEY","Symbol","Singleton","classTarget","Proxy","construct","target","argumentsList","newTarget","prototype","Reflect","ObjectUtil","obj","JSON","parse","stringify","CardService","fn","stateFunction","this","listID","state","newState","deepCopy","card","id","uuid","list_id","value","completed","push","cardObj","index","findIndex","filter","BoardService","name","ListService","listObj","list","BoardWrapper","styled","div","Header","h2","HeaderInput","input","ListsContainer","Board","boardService","children","useState","toggle","setToggle","inputRef","useRef","handleCompletion","current","trim","changeName","onDoubleClick","type","ref","defaultValue","onBlur","onKeyDown","event","key","ListStyle","CardWrapper","h4","Button","button","ContentWrapper","List","data","cardService","listService","updateList","onClick","deleteList","deleteCardByList","droppableId","provided","droppableProps","innerRef","placeholder","addCard","TextArea","textarea","Card","textAreaRef","useEffect","changeTextAreaHeight","style","height","scrollHeight","deleteCard","updateCard","handleKeyDown","draggableId","draggableProps","dragHandleProps","autoFocus","onChange","AddList","addList","App","boardState","setBoardState","listsState","setListsState","cardsState","setCardsState","board","localStorage","getItem","lists","cards","window","location","reload","setItem","className","onDragEnd","result","source","destination","find","item","splice","map","flatMap","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.89d301d4.chunk.js","sourcesContent":["const SINGLETON_KEY = Symbol()\r\n\r\ntype singleton<T extends new (...args: any[]) => any> = T & {\r\n    [SINGLETON_KEY]: T extends new (...args: any[]) => infer I ? I : never\r\n}\r\nconst Singleton = <T extends new (...args: any[]) => any>(classTarget: T) =>\r\n    new Proxy(classTarget, {\r\n        construct(target: singleton<T>, argumentsList, newTarget) {\r\n            // Skip proxy for children\r\n            if (target.prototype !== newTarget.prototype) {\r\n                return Reflect.construct(target, argumentsList, newTarget)\r\n            }\r\n            if (!target[SINGLETON_KEY]) {\r\n                target[SINGLETON_KEY] = Reflect.construct(target, argumentsList, newTarget)\r\n            }\r\n            return target[SINGLETON_KEY]\r\n        },\r\n    })\r\n\r\nexport default Singleton;","class ObjectUtil {\r\n    public static deepCopy(obj: Object) {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n}\r\n\r\nexport default ObjectUtil;","import Singleton from \"../decorators/Singleton\";\r\nimport ICard from \"../interfaces/ICard\";\r\nimport ObjectUtil from \"../utils/ObjectUtil\";\r\nimport {v4 as uuid} from \"uuid\";\r\n\r\n@Singleton\r\nclass CardService {\r\n    private readonly stateFunction: Function;\r\n\r\n    public constructor(fn: Function) {\r\n        this.stateFunction = fn;\r\n    }\r\n\r\n    public addCard(listID: string) {\r\n        this.stateFunction((state: any) => {\r\n            const newState = ObjectUtil.deepCopy(state);\r\n\r\n            const card: ICard = {\r\n                id: uuid(),\r\n                list_id: listID,\r\n                value: \"\",\r\n                completed: false\r\n            };\r\n\r\n            newState.push(card);\r\n\r\n            return newState;\r\n        });\r\n    }\r\n\r\n    public updateCard(cardObj: ICard) {\r\n        this.stateFunction((state: any) => {\r\n            const newState = ObjectUtil.deepCopy(state);\r\n\r\n            const index = newState.findIndex((card: ICard) => card.id === cardObj.id);\r\n            newState[index] = cardObj;\r\n\r\n            return newState;\r\n        });\r\n    }\r\n\r\n    public deleteCard(cardObj: ICard) {\r\n        this.stateFunction((state: any) => {\r\n           return ObjectUtil.deepCopy(state).filter((card: any) => {\r\n                return card.id !== cardObj.id;\r\n            });\r\n        });\r\n    }\r\n\r\n    public deleteCardByList(listID: string) {\r\n        this.stateFunction((state: any) => {\r\n            return ObjectUtil.deepCopy(state).filter((card: any) => {\r\n                return card.list_id !== listID;\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default CardService;","import Singleton from \"../decorators/Singleton\";\r\nimport ObjectUtil from \"../utils/ObjectUtil\";\r\n\r\n@Singleton\r\nclass BoardService {\r\n    private readonly stateFunction:  Function;\r\n\r\n    public constructor(fn: Function) {\r\n        this.stateFunction = fn;\r\n    }\r\n\r\n    public changeName(name: string) {\r\n        this.stateFunction((state: any) => {\r\n            const newState = ObjectUtil.deepCopy(state);\r\n            newState.name = name;\r\n            return newState;\r\n        });\r\n    }\r\n}\r\n\r\nexport default BoardService;","import Singleton from \"../decorators/Singleton\";\r\nimport IList from \"../interfaces/IList\";\r\nimport ObjectUtil from \"../utils/ObjectUtil\";\r\nimport {v4 as uuid} from \"uuid\";\r\n\r\n@Singleton\r\nclass ListService {\r\n    private readonly stateFunction: Function;\r\n\r\n    public constructor(fn: Function) {\r\n        this.stateFunction = fn;\r\n    }\r\n\r\n    public addList() {\r\n        this.stateFunction((state: any) => {\r\n            return [...ObjectUtil.deepCopy(state), {\r\n                id: uuid(),\r\n                name: \"List name\"\r\n                } as IList];\r\n        });\r\n    }\r\n\r\n    public updateList(listObj: IList) {\r\n        this.stateFunction((state: any) => {\r\n            const newState = ObjectUtil.deepCopy(state);\r\n\r\n            const index = newState.findIndex((list: IList) => list.id === listObj.id);\r\n            newState[index] = listObj;\r\n\r\n            return newState;\r\n        });\r\n    }\r\n\r\n    public deleteList(listObj: IList) {\r\n        this.stateFunction((state: any) => {\r\n            return ObjectUtil.deepCopy(state).filter((list: any) => {\r\n                return list.id !== listObj.id;\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default ListService;","import styled from \"styled-components\";\r\nimport {ReactNode, useRef, useState} from \"react\";\r\nimport BoardService from \"../services/BoardService\";\r\n\r\nconst BoardWrapper = styled.div`\r\n  display: flex;\r\n  flex-flow: column;\r\n  height: 100%;\r\n  background: #282828;\r\n`;\r\n\r\nconst Header = styled.h2`\r\n  margin: 0;\r\n  padding: 15px;\r\n  color: white;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst HeaderInput = styled.input`\r\n  margin: 0;\r\n  padding: 0;\r\n  color: white;\r\n  border: none;\r\n  background: transparent;\r\n  font-weight: bold;\r\n\r\n  &:focus {\r\n    outline: 0;\r\n  }\r\n`;\r\n\r\nconst ListsContainer = styled.div`\r\n  flex: 1;\r\n  display: inline-flex;\r\n  padding: 0 15px 15px;\r\n  overflow-x: auto;\r\n`;\r\n\r\nconst Board = ({name, boardService, children}: { name: string, boardService: BoardService, children: ReactNode }) => {\r\n    const [toggle, setToggle] = useState(false)\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleCompletion = () => {\r\n        if (inputRef.current!.value.trim() === \"\") return;\r\n        boardService.changeName(inputRef.current!.value);\r\n        setToggle(false)\r\n    }\r\n\r\n    const handleKeyDown = (event: any) => {\r\n        if (event.key === 'Enter' || event.key === 'Escape') {\r\n            handleCompletion();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <BoardWrapper>\r\n            <Header onDoubleClick={() => setToggle(true)}>\r\n                {(toggle) ? (<HeaderInput type=\"text\" ref={inputRef} defaultValue={name}\r\n                                          onBlur={handleCompletion}\r\n                                          onKeyDown={handleKeyDown}/>) :\r\n                    <>{name}</>\r\n                }\r\n            </Header>\r\n            <ListsContainer>\r\n                {children}\r\n            </ListsContainer>\r\n        </BoardWrapper>\r\n    )\r\n}\r\n\r\nexport default Board;","import styled from \"styled-components\";\r\nimport {ReactNode, useRef, useState} from \"react\";\r\nimport ListService from \"../services/ListService\";\r\nimport CardService from \"../services/CardService\";\r\nimport IList from \"../interfaces/IList\";\r\nimport {BiTrash} from \"react-icons/bi\";\r\nimport {Droppable} from \"react-beautiful-dnd\";\r\n\r\nconst ListStyle = styled.div`\r\n  min-width: 280px;\r\n  max-width: 280px;\r\n  background: #ebecf0;\r\n  border-radius: 3px;\r\n\r\n  /* Enables Scroll on CardWrapper */\r\n  position: relative;\r\n  height: 100%;\r\n\r\n  & ~ & {\r\n    margin-left: 15px;\r\n  }\r\n`;\r\n\r\nconst CardWrapper = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  /*   Top: 40 for header */\r\n  top: 40px;\r\n  /*   Bottom: 45 for button */\r\n  bottom: 45px;\r\n  overflow-y: auto;\r\n\r\n\r\n  /* width */\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 10px;\r\n  }\r\n\r\n  /* Track */\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: #f1f1f1;\r\n  }\r\n\r\n  /* Handle */\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #c4c4c4;\r\n  }\r\n`;\r\n\r\nconst Header = styled.h4`\r\n  padding: 10px;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  \r\n  &:hover > * div:last-of-type {\r\n    color: black;\r\n    transition: all 500ms;\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nconst HeaderInput = styled.input`\r\n  margin: 0;\r\n  padding: 0;\r\n  font-weight: bold;\r\n  border: none;\r\n  background: transparent;\r\n\r\n  &:focus {\r\n    outline: 0;\r\n  }\r\n`\r\n\r\nconst Button = styled.button`\r\n  position: absolute;\r\n  bottom: 0;\r\n  width: 100%;\r\n  border: none;\r\n  background: lightgray;\r\n  padding: 15px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ContentWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  & > *:last-of-type {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 0 5px 0 15px;\r\n    color: #ebecf0;\r\n    opacity: 0;\r\n  }\r\n\r\n`;\r\n\r\nconst List = ({\r\n                  data,\r\n                  children,\r\n                  cardService,\r\n                  listService\r\n              }: { data: IList, children: ReactNode, cardService: CardService, listService: ListService }) => {\r\n    const [toggle, setToggle] = useState(false)\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleCompletion = () => {\r\n        if (inputRef.current!.value.trim() === \"\") return;\r\n\r\n        data.name = inputRef.current!.value;\r\n        listService.updateList(data);\r\n\r\n        setToggle(false);\r\n    }\r\n\r\n    const handleKeyDown = (event: any) => {\r\n        if (event.key === 'Enter' || event.key === 'Escape') {\r\n            handleCompletion();\r\n        }\r\n    }\r\n\r\n    const handleDeleteClick = () => {\r\n        listService.deleteList(data);\r\n        cardService.deleteCardByList(data.id);\r\n    }\r\n\r\n\r\n    return (\r\n        <ListStyle>\r\n            <Header onDoubleClick={() => setToggle(true)}>\r\n                {(toggle) ? (<HeaderInput type=\"text\" ref={inputRef} defaultValue={data.name}\r\n                                          onBlur={handleCompletion}\r\n                                          onKeyDown={handleKeyDown}/>) :\r\n                    <ContentWrapper>\r\n                        <div>{data.name}</div>\r\n                        <div onClick={handleDeleteClick}><BiTrash/></div>\r\n                    </ContentWrapper>}\r\n            </Header>\r\n            <Droppable droppableId={data.id}>\r\n                {provided => (\r\n                    <CardWrapper {...provided.droppableProps} ref={provided.innerRef}>\r\n                        {children}\r\n                        {provided.placeholder}\r\n                    </CardWrapper>\r\n                )}\r\n            </Droppable>\r\n            <Button onClick={() => cardService.addCard(data.id)}>Add Card +</Button>\r\n        </ListStyle>\r\n    )\r\n}\r\n\r\nexport default List;","import styled from \"styled-components\";\r\nimport {useEffect, useRef, useState} from \"react\";\r\nimport {BiTrash} from \"react-icons/bi\";\r\nimport CardService from \"../services/CardService\";\r\nimport ICard from \"../interfaces/ICard\";\r\nimport {Draggable} from \"react-beautiful-dnd\";\r\n\r\nconst CardWrapper = styled.div`\r\n  background: white;\r\n  margin: 0 5px 5px;\r\n  padding: 10px;\r\n  border-radius: 3px;\r\n  overflow-wrap: break-word;\r\n\r\n  & ~ & {\r\n    margin-top: 5px;\r\n  }\r\n\r\n  &:hover > * div:last-of-type {\r\n    color: black;\r\n    transition: all 500ms;\r\n\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.textarea`\r\n  border: none;\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  min-height: 15px;\r\n  display: block;\r\n  overflow: hidden;\r\n  resize: none;\r\n\r\n  &:focus {\r\n    outline: 0;\r\n  }\r\n`;\r\n\r\nconst ContentWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  & > *:last-of-type {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 0 5px 0 15px;\r\n    color: white;\r\n    cursor: pointer;\r\n  }\r\n\r\n`;\r\n\r\n\r\nconst Card = ({data, cardService, index}: { data: ICard, cardService: CardService, index: number }) => {\r\n    const [toggle, setToggle] = useState((data.value === \"\"))\r\n    const textAreaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (!toggle) return;\r\n        changeTextAreaHeight();\r\n    }, [toggle]);\r\n\r\n    const changeTextAreaHeight = () => {\r\n        const target = textAreaRef.current!;\r\n\r\n        target.style.height = 'auto';\r\n        target.style.height = target?.scrollHeight + 'px';\r\n\r\n    }\r\n\r\n    const handleCompletion = () => {\r\n        if (textAreaRef.current!.value.trim() === \"\") return cardService.deleteCard(data);\r\n\r\n        setToggle(false);\r\n        data.value = textAreaRef.current!.value;\r\n        cardService.updateCard(data);\r\n    }\r\n\r\n    const handleKeyDown = (event: any) => {\r\n        if (event.key === 'Enter' || event.key === 'Escape') {\r\n            handleCompletion();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Draggable draggableId={data.id} index={index}>\r\n            {provided => (\r\n                <CardWrapper\r\n                    onDoubleClick={() => setToggle(true)}\r\n                    {...provided.draggableProps}\r\n                    {...provided.dragHandleProps}\r\n                    ref={provided.innerRef}\r\n                >\r\n                    {(toggle) ?\r\n                        (<TextArea autoFocus={true} ref={textAreaRef} defaultValue={data.value}\r\n                                   onChange={changeTextAreaHeight}\r\n                                   onKeyDown={handleKeyDown}\r\n                                   onBlur={handleCompletion}\r\n                            />\r\n                        ) : <ContentWrapper>\r\n                            <div>{data.value}</div>\r\n                            <div onClick={() => cardService.deleteCard(data)}><BiTrash/></div>\r\n                        </ContentWrapper>}\r\n                </CardWrapper>\r\n            )}\r\n        </Draggable>\r\n    )\r\n}\r\n\r\nexport default Card;","import styled from \"styled-components\";\r\nimport ListService from \"../services/ListService\";\r\n\r\nconst Button = styled.button`\r\n  width: 280px;\r\n  border: none;\r\n  background: #ebecf0;\r\n  border-radius: 3px;\r\n  flex: none;\r\n  align-self: flex-start;\r\n  padding: 15px;\r\n  cursor: pointer;\r\n  \r\n  * ~ & {\r\n    margin-left: 15px;\r\n  }\r\n`;\r\n\r\nfunction AddList({listService}: {listService: ListService}) {\r\n    return (\r\n           <Button onClick={() => listService.addList()}>Add List +</Button>\r\n    )\r\n}\r\n\r\nexport default AddList","import {useEffect, useState} from \"react\";\r\nimport './App.css';\r\n\r\n/* Services */\r\nimport CardService from \"./services/CardService\";\r\nimport BoardService from \"./services/BoardService\";\r\nimport ListService from \"./services/ListService\";\r\n\r\n/* Interfaces */\r\nimport IBoard from \"./interfaces/IBoard\"\r\nimport IList from \"./interfaces/IList\";\r\nimport ICard from \"./interfaces/ICard\";\r\n\r\n/* Components */\r\nimport Board from \"./components/Board\";\r\nimport List from \"./components/List\";\r\nimport Card from \"./components/Card\";\r\nimport AddList from \"./components/AddList\";\r\nimport {DragDropContext, DropResult} from \"react-beautiful-dnd\";\r\nimport ObjectUtil from \"./utils/ObjectUtil\";\r\n\r\n/* Service variables */\r\nlet boardService: BoardService;\r\nlet listService: ListService;\r\nlet cardService: CardService;\r\n\r\nfunction App() {\r\n    const [boardState, setBoardState] = useState<IBoard>({name: \"Board name\"});\r\n    const [listsState, setListsState] = useState<IList[]>([]);\r\n    const [cardsState, setCardsState] = useState<ICard[]>([]);\r\n\r\n    useEffect(() => {\r\n        boardService = new BoardService(setBoardState);\r\n        listService = new ListService(setListsState);\r\n        cardService = new CardService(setCardsState);\r\n    }, [boardState, cardsState, listsState]);\r\n\r\n\r\n    useEffect(() => {\r\n        const board = localStorage.getItem(\"boardState\");\r\n        const lists = localStorage.getItem(\"listsState\");\r\n        const cards = localStorage.getItem(\"cardsState\");\r\n        if (board) setBoardState(JSON.parse(board));\r\n        if (lists) setListsState(JSON.parse(lists));\r\n        if (cards) setCardsState(JSON.parse(cards));\r\n\r\n        // weird issue, can't use buttons when localStorage has no data. So fixed by reloading.\r\n        if (!board) window.location.reload();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(\"boardState\", JSON.stringify(boardState));\r\n        localStorage.setItem(\"listsState\", JSON.stringify(listsState));\r\n        localStorage.setItem(\"cardsState\", JSON.stringify(cardsState));\r\n    }, [boardState, listsState, cardsState]);\r\n\r\n    const onDragEnd = (result: DropResult) => {\r\n        const {draggableId, source, destination} = result;\r\n\r\n        if (!destination) return;\r\n        if (destination.index === source.index && destination.droppableId === source.droppableId) return;\r\n\r\n        setCardsState((state: any) => {\r\n            const newState = ObjectUtil.deepCopy(state);\r\n            let card = newState.find((item: ICard) => item.id === draggableId)!;\r\n\r\n            card.list_id = destination.droppableId;\r\n\r\n            newState.splice(source.index, 1);\r\n            newState.splice(destination.index, 0, card);\r\n\r\n            return newState;\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <Board name={boardState!.name} boardService={boardService}>\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n                {listsState!.map((list) => (\r\n                    // Generate List\r\n                    <List key={list.id} data={list} cardService={cardService} listService={listService}>\r\n\r\n                        {cardsState.flatMap((card: any, index) => card.list_id === list.id ? (\r\n                            // Generate Card\r\n                            <Card key={card.id} data={card}\r\n                                  cardService={cardService} index={index}/>\r\n                        ) : \"\")}\r\n\r\n                    </List>\r\n                ))}\r\n            </DragDropContext>\r\n                <AddList listService={listService}/>\r\n            </Board>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}